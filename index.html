<!Doctype html>
<html>
    <head>
        <title>grapnel ninja</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta charset = "UTF-8">
        <style>
            body 
            {
                margin: 0;
                padding: 0;
                overflow: hidden;
                background-color: 0;
            }
        </style>
        <script src = "konva.min.js"></script>
    </head>
    <body>
        <script src = "gameoptions.js"></script>
        
        <script src = "collision/circlewithline.js"></script>
        <script src = "collision/linewithline.js"></script>
        
        <script src = "sprites/sprite.js"></script>
        <script src = "sprites/ninja.js"></script>
        <script src = "sprites/grapnel.js"></script>
        <script src  ="sprites/create.js"></script>
        
        <script src = "physics.js"></script>
        
        <script src = "obstacles/generate.js"></script>
        <script src = "obstacles/delete.js"></script>
        <script src = "moveScreen.js"></script>
        
        <script src = "render/layers.js"></script>
        <script src = "render/draw.js"></script>
        
        <script src = "events.js"></script>
        <div id = "container"></div>
        <script>
            'use strict'
            let stage = new Konva.Stage({
                container: 'container',
                width: width,
                height: height
            })
            window.onload = startGame()
            function startGame()
            {
                Konva.pixelRatio = 1
                
                addLayersToStage()
                addSpritesToLayers()
                
                //drawMechanicsLines()
                drawStaticLayers()
                
                
                generatePrimaryObstacles()
                
                createEvents()
                
                startDrawAnimations()
                
                requestAnimationFrame(gameLoop)
            }

            function gameLoop()
            {
                /*for (let i = 0; i < cyclesPerTick; ++i)
                {
                    physics()
                }*/
                physics()
                /*if (grapnel.throwed)
                {
                    layer.grapnel.visible(true)
                    layer.grapnel.draw()
                }
                else
                    layer.grapnel.visible(false)*/
                
                //ninjaLayer.draw()
                
                //staticLayer.draw()
                //mechanicsLayer.draw()
                //layer.obstacles.draw()
                
                
                requestAnimationFrame(gameLoop)
            }
            
            
            
        </script>
    </body>
</html>